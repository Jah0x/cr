import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'

const storageKey = 'language'
const supportedLanguages = ['ru', 'en'] as const

type SupportedLanguage = (typeof supportedLanguages)[number]

const detectInitialLanguage = (): SupportedLanguage => {
  const stored = localStorage.getItem(storageKey)
  if (stored && supportedLanguages.includes(stored as SupportedLanguage)) {
    return stored as SupportedLanguage
  }

  const browserLanguages = navigator.languages ?? [navigator.language]
  const normalized = browserLanguages.map((lang) => lang.toLowerCase())
  if (normalized.some((lang) => lang.startsWith('ru'))) {
    return 'ru'
  }
  if (normalized.some((lang) => lang.startsWith('en'))) {
    return 'en'
  }
  return 'ru'
}

const resources = {
  en: {
    translation: {
      language: {
        label: 'Language',
        ru: 'Russian',
        en: 'English'
      },
      nav: {
        platform: 'Platform',
        tenants: 'Organizations',
        tenantConsole: 'Organization Console',
        admin: 'Admin',
        pos: 'POS',
        finance: 'Finance',
        shifts: 'Shifts',
        settings: 'Settings',
        logout: 'Logout'
      },
      adminNav: {
        catalog: 'Catalog',
        purchasing: 'Suppliers & Purchasing',
        stock: 'Stock',
        reports: 'Reports',
        users: 'Users',
        catalogVisibility: 'Catalog visibility'
      },
      adminTabs: {
        categories: 'Categories',
        brands: 'Brands',
        lines: 'Lines',
        products: 'Products',
        suppliers: 'Suppliers',
        invoices: 'Invoices',
        stockLevels: 'Stock levels',
        adjustments: 'Adjustments'
      },
      common: {
        add: 'Add',
        save: 'Save',
        close: 'Close',
        saving: 'Saving...',
        cancel: 'Cancel',
        create: 'Create',
        loading: 'Loading...',
        retry: 'Retry',
        yes: 'Yes',
        no: 'No',
        status: 'Status',
        schema: 'Schema',
        revision: 'Revision',
        head: 'Head',
        primary: 'Primary',
        remove: 'Remove',
        copy: 'Copy',
        copied: 'Copied',
        email: 'Email',
        password: 'Password',
        created: 'Created',
        updated: 'Updated',
        deleted: 'Deleted',
        delete: 'Delete',
        confirmDelete: 'Delete this item?',
        saved: 'Saved',
        error: 'Something went wrong'
      },
      errors: {
        loginFailed: 'Login failed',
        requestTimeout: 'Request timed out. Please try again.',
        requestCancelled: 'Request was cancelled. Please try again.',
        invalidPlatformCredentials: 'Invalid platform credentials.',
        inviteInvalid: 'Invite is invalid or expired.',
        inviteNotFound: 'Invite not found. Ask an admin to create a new one.',
        inviteNotFoundOrExpired: 'Invite not found or expired.',
        inviteExpired: 'Invite has expired. Create a new invite.',
        inviteExpiredStatus: 'Invite has expired.',
        inviteTenantMismatch: 'Invite is for another tenant. Open the domain from the email.',
        inviteServerError: 'Server error. Contact the administrator.',
        inviteNetwork: 'Unable to reach the server.',
        requestId: 'Request ID: {{id}}',
        inviteTokenRequired: 'Invite token is required.',
        inviteTokenMissing: 'Invite link is missing a token.',
        passwordLength: 'Password must be at least 8 characters.',
        passwordMismatch: 'Passwords do not match.',
        registrationFailed: 'Unable to complete registration.',
        loadTenantsFailed: 'Unable to load tenants.',
        loadTenantSettingsFailed: 'Unable to load tenant settings.',
        loadTenantSettingsMessage: 'Failed to load tenant settings.',
        finalizeSaleFailed: 'Unable to finalize sale.',
        createTenantFailed: 'Unable to create organization.',
        addItemsBeforeFinalize: 'Add items to the cart before finalizing.'
      },
      login: {
        title: 'Login',
        signIn: 'Sign in',
        emailPlaceholder: 'Email',
        passwordPlaceholder: 'Password'
      },
      register: {
        title: 'Complete registration',
        invitedEmail: 'Invited email',
        inviteTokenPlaceholder: 'Invite token',
        passwordPlaceholder: 'Password',
        confirmPasswordPlaceholder: 'Confirm password',
        setPassword: 'Set password'
      },
      platformLogin: {
        title: 'Platform Access',
        subtitle: 'Sign in with the platform owner credentials.',
        signIn: 'Sign in'
      },
      admin: {
        title: 'Admin',
        menuToggle: 'Open admin menu',
        menuClose: 'Close admin menu',
        catalog: 'Catalog',
        catalogSubtitle: 'Step-by-step catalog setup',
        catalogCategoryTitle: 'Category',
        catalogBrandTitle: 'Brand',
        catalogLinkTitle: 'Brand to category link',
        catalogLineTitle: 'Product line',
        catalogProductTitle: 'Product',
        categoryPlaceholder: 'Category',
        addCategory: 'Add Category',
        brandPlaceholder: 'Brand',
        addBrand: 'Add Brand',
        linePlaceholder: 'Line',
        addLine: 'Add Line',
        brandSelect: 'Brand',
        categorySelect: 'Category',
        lineSelect: 'Line',
        skuPlaceholder: 'SKU',
        barcodePlaceholder: 'Barcode',
        productPlaceholder: '(optional) product name — defaults to line',
        productImageLabel: 'Product image URL',
        productImagePlaceholder: 'https://example.com/photo.jpg',
        productImageUpload: 'Upload image',
        productImagePreview: 'Product image preview',
        clearImage: 'Clear image',
        unitLabel: 'Unit',
        purchasePriceLabel: 'Purchase price',
        purchasePricePlaceholder: 'Purchase price',
        costPriceLabel: 'Cost price',
        costPricePlaceholder: 'Cost price',
        sellPriceLabel: 'Retail price',
        sellPricePlaceholder: 'Sell price',
        addProduct: 'Add Product',
        saveProduct: 'Save Product',
        linkBrand: 'Link brand',
        unlinkBrand: 'Unlink',
        linkBrandModalTitle: 'Link brand to category',
        searchBrandPlaceholder: 'Search brand',
        listRows: 'Rows in window',
        emptyCategories: 'No categories yet.',
        emptyBrands: 'No brands yet.',
        emptyLines: 'No lines yet.',
        emptyCategoryBrands: 'No linked brands.',
        emptyLinkedBrands: 'No brands linked yet.',
        emptyAvailableBrands: 'No brands available.',
        emptyProducts: 'No products yet.',
        selectCategoryToLink: 'Select a category to see linked brands.',
        unitPcs: 'pcs',
        unitMl: 'ml',
        unitG: 'g',
        table: {
          image: 'Image',
          name: 'Name',
          brand: 'Brand',
          brands: 'Brands',
          actions: 'Actions',
          sku: 'SKU',
          category: 'Category',
          line: 'Line',
          unit: 'Unit',
          purchasePrice: 'Purchase price',
          costPrice: 'Cost price',
          sellPrice: 'Sell price'
        },
        validation: {
          requiredFields: 'Fill in all required fields.',
          selectBrandForLine: 'Select a brand to create a product line.',
          nonNegative: 'Values must be zero or above.',
          productNameOrLine: 'Enter a product name or pick a line.'
        },
        errors: {
          alreadyExists: 'Already exists.'
        },
        suppliersPurchasing: 'Suppliers & Purchasing',
        supplierPlaceholder: 'Supplier',
        addSupplier: 'Add Supplier',
        newInvoice: 'New Invoice',
        workingInvoice: 'Working invoice {{id}}',
        productSelect: 'Product',
        qtyPlaceholder: 'Qty',
        costPlaceholder: 'Cost',
        addItem: 'Add Item',
        postInvoice: 'Post Invoice',
        stock: 'Stock',
        adjust: 'Adjust',
        stockLevels: 'Stock Levels',
        reports: 'Reports',
        loadSummary: 'Load Summary',
        totalSales: 'Total sales',
        totalPurchases: 'Total purchases',
        grossMargin: 'Gross margin'
      },
      adminUsers: {
        subtitle: 'Manage access, roles, and reset passwords.',
        roles: 'Roles',
        active: 'Active',
        empty: 'No users yet.',
        noRoles: 'No roles',
        assignCashier: 'Assign cashier',
        removeCashier: 'Remove cashier',
        newPasswordPlaceholder: 'New password',
        setPassword: 'Set password',
        passwordRequired: 'Enter a new password.',
        rolesUpdated: 'Roles updated.',
        passwordUpdated: 'Password updated.'
      },
      adminSections: {
        createCategory: 'Create category',
        createCategorySubtitle: 'Add a new category to start building the catalog.',
        categoryList: 'Category list',
        createBrand: 'Create brand',
        createBrandSubtitle: 'Brands help group product lines and products.',
        brandList: 'Brand list',
        createLine: 'Create line',
        createLineSubtitle: 'Attach a line to the selected brand.',
        lineList: 'Product lines',
        createProduct: 'Create product',
        createProductSubtitle: 'Fill in the key product details and pricing.',
        productList: 'Product list'
      },
      adminPurchasing: {
        subtitle: 'Manage suppliers and purchase invoices.',
        createSupplier: 'Create supplier',
        createSupplierSubtitle: 'Add suppliers you purchase from regularly.',
        suppliersList: 'Suppliers list',
        emptySuppliers: 'No suppliers yet.',
        selectSupplier: 'Select supplier',
        workingInvoice: 'Working invoice',
        workingInvoiceSubtitle: 'Create or select an invoice to work with positions.',
        selectInvoice: 'Select invoice',
        selectInvoicePlaceholder: 'Choose invoice',
        unknownSupplier: 'Unknown supplier',
        addItemTitle: 'Add invoice item',
        addItemSubtitle: 'Add products, quantities, and costs to the invoice.',
        invoiceItems: 'Invoice items',
        invoiceItemsSubtitle: 'Selected invoice items are listed here.',
        emptyInvoiceItems: 'No items added yet.',
        qty: 'Qty',
        cost: 'Cost',
        total: 'Total',
        statusFilter: 'Invoice status',
        statusAll: 'All statuses',
        statusDraft: 'Draft',
        statusPosted: 'Posted',
        statusVoid: 'Voided',
        searchField: 'Search invoice',
        searchPlaceholder: 'Invoice number or supplier',
        itemsCount: 'Items count',
        voidInvoice: 'Void invoice',
        supplierNamePlaceholder: 'Supplier name',
        supplierSelectPlaceholder: 'Select supplier for invoice',
        productSelectPlaceholder: 'Select product for position',
        qtyPlaceholderDetailed: 'Quantity for position',
        costPlaceholderDetailed: 'Unit cost for position'
      },
      adminStock: {
        subtitle: 'Track stock levels and apply adjustments.',
        levelsTitle: 'Stock levels',
        emptyLevels: 'No stock levels yet.',
        onHand: 'On hand',
        adjustmentsTitle: 'Stock adjustments',
        adjustmentsSubtitle: 'Use clear adjustment scenarios and check history.',
        productField: 'Product',
        productPlaceholder: 'Select product for adjustment',
        modeField: 'Adjustment mode',
        modeSet: 'Set exact stock',
        modeIncrease: 'Increase by quantity',
        modeDecrease: 'Decrease by quantity',
        qtyField: 'Quantity',
        qtyPlaceholderDetailed: 'Enter quantity based on selected mode',
        reasonField: 'Reason',
        reasonPlaceholder: 'Reason for adjustment',
        currentAndNext: 'Current and resulting stock',
        previewText: 'Current: {{current}}, after adjustment: {{next}}',
        defaultReason: 'manual adjustment',
        delta: 'Change',
        reason: 'Reason',
        emptyAdjustments: 'No adjustments yet.',
        decreaseLimitError: 'Decrease quantity cannot exceed current stock.'
      },
      adminReports: {
        subtitle: 'Monitor key metrics and sales performance.',
        period: 'Period',
        customRange: 'Custom range',
        from: 'From',
        to: 'To',
        load: 'Load report',
        revenue: 'Revenue',
        purchases: 'Purchases',
        margin: 'Margin',
        salesCount: 'Sales count',
        topProducts: 'Top products',
        topProductsSubtitle: 'Overview of the best-selling items.',
        sales: 'Sales',
        noData: 'No data yet.'
      },
      pos: {
        title: 'POS',
        subtitle: 'Quick sales, flexible payments, and tax-aware totals.',
        searchProducts: 'Search products',
        noImage: 'No image',
        cart: 'Cart',
        emptyCart: 'No items in cart',
        subtotal: 'Subtotal',
        tax: 'Tax',
        taxIncluded: 'Tax (included)',
        taxAdded: 'Tax (added)',
        payments: 'Payments',
        amount: 'Amount',
        reference: 'Reference',
        addPayment: 'Add',
        due: 'Due',
        sendToTerminal: 'Send to terminal',
        finalize: 'Finalize Sale',
        sale: 'Sale',
        status: 'Status',
        total: 'Total',
        product: 'Product',
        qty: 'Qty',
        price: 'Price',
        taxes: 'Taxes',
        loadMore: 'Load more',
        saleDetails: 'Sale details',
        remove: 'Remove',
        paymentMethodCash: 'Cash',
        paymentMethodCard: 'Card',
        paymentMethodTransfer: 'Transfer',
        historyTitle: 'Sales history',
        historySubtitle: 'Review recent sales and filter by cashier, dates, or payment type.',
        historyCashier: 'Cashier',
        historyAllCashiers: 'All cashiers',
        historyDateFrom: 'From',
        historyDateTo: 'To',
        historyPaymentMethod: 'Payment method',
        historyAllPayments: 'All payment methods',
        historyApply: 'Apply filters',
        historyReset: 'Reset',
        historyEmpty: 'No sales found for the selected filters.',
        statusDraft: 'Draft',
        statusCompleted: 'Completed',
        statusCancelled: 'Cancelled',
        shiftStatus: 'Shift status',
        shiftOpen: 'Open',
        shiftClosed: 'Closed',
        openShift: 'Open shift',
        closeShift: 'Close shift',
        shiftRequired: 'Open a shift before finalizing a sale.',
        shiftStoreUnavailable: 'No store configured to open a shift.'
      },
      shifts: {
        title: 'Shifts',
        subtitle: 'Track cashier shifts, statuses, and payments.',
        filtersTitle: 'Filters',
        filterDateFrom: 'From',
        filterDateTo: 'To',
        filterCashier: 'Cashier',
        filterAllCashiers: 'All cashiers',
        filterStore: 'Store',
        filterAllStores: 'All stores',
        filterStatus: 'Status',
        filterAllStatuses: 'All statuses',
        applyFilters: 'Apply filters',
        resetFilters: 'Reset',
        tableTitle: 'Shift list',
        colOpenedAt: 'Opened at',
        colClosedAt: 'Closed at',
        colCashier: 'Cashier',
        colStore: 'Store',
        colRevenue: 'Revenue',
        colPayments: 'Cash / Card / Transfer',
        colStatus: 'Status',
        colAction: 'Action',
        details: 'Details',
        detailTitle: 'Shift details',
        statusOpen: 'Open',
        statusClosed: 'Closed',
        closeShift: 'Close shift',
        empty: 'No shifts found.'
      },
      finance: {
        title: 'Finance',
        filtersTitle: 'Filters',
        filtersSubtitle: 'Select dates and payment methods for the reports below.',
        applyFilters: 'Apply filters',
        resetFilters: 'Reset filters',
        dateFrom: 'From',
        dateTo: 'To',
        expenseCategories: 'Expense Categories',
        categoryName: 'Category name',
        addCategory: 'Add Category',
        logExpense: 'Log Expense',
        amount: 'Amount',
        category: 'Category',
        paymentMethod: 'Payment method',
        note: 'Note',
        saveExpense: 'Save Expense',
        pnlSummary: 'P&L Summary',
        overviewTitle: 'Sales overview',
        overviewSubtitle: 'Revenue, gross profit, and tax totals for the selected period.',
        today: 'Today',
        week: 'Week',
        month: 'Month',
        totalSales: 'Total sales',
        totalRevenue: 'Revenue',
        cogs: 'COGS',
        grossProfit: 'Gross profit',
        expenses: 'Expenses',
        netProfit: 'Net profit',
        totalTaxes: 'Total taxes',
        paymentMethodTitle: 'Payment method',
        topProductsTitle: 'Top products',
        topProductsSubtitle: 'Top items by revenue and margin.',
        productName: 'Product',
        quantity: 'Quantity',
        totalMargin: 'Total margin',
        noTopProducts: 'No top products yet.',
        inventoryTitle: 'Inventory valuation',
        inventorySubtitle: 'Estimated inventory value at cost.',
        inventoryTotal: 'Total inventory value:',
        unitCost: 'Unit cost',
        inventoryValue: 'Inventory value',
        inventoryEmpty: 'Inventory data is not available.',
        expensesTitle: 'Expenses',
        noNote: 'No note',
        taxesTitle: 'Taxes',
        taxesSubtitle: 'Summary of taxes due for the selected period.',
        taxesEmpty: 'Taxes are not configured yet.',
        taxName: 'Tax',
        taxRate: 'Rate',
        taxTotal: 'Taxes due',
        taxCash: 'Cash',
        taxCard: 'Card',
        taxTransfer: 'Transfer',
        taxGrandTotal: 'Total taxes',
        recurringExpensesTitle: 'Recurring expenses',
        recurringExpensesEmpty: 'No recurring expenses yet.',
        addRecurringExpense: 'Add recurring expense',
        recurringNamePrompt: 'Recurring expense name',
        recurringAmountPrompt: 'Recurring expense amount',
        recurringDeactivateConfirm: 'Deactivate this recurring expense?',
        invalidAmount: 'Enter a valid amount.',
        name: 'Name',
        period: 'Period',
        actions: 'Actions',
        active: 'Active',
        inactive: 'Inactive',
        edit: 'Edit',
        deactivate: 'Deactivate',
        date: 'Date',
        operatingProfit: 'Operating profit',
        profitabilityStatus: 'Profitability',
        profitable: 'Profitable',
        unprofitable: 'Unprofitable',
        profitLossTitle: 'Profit and loss',
        profitLossSubtitle: 'Gross and operating profit with daily breakdown.',
        profitLossEmpty: 'No profit/loss data for this period.',
        recurringPeriod: {
          daily: 'Daily',
          weekly: 'Weekly',
          monthly: 'Monthly'
        },
        taxMethod: {
          cash: 'Cash',
          card: 'Card',
          transfer: 'Transfer'
        }
      },
      adminCatalogVisibility: {
        subtitle: 'Control which products are shown on the public catalog page.',
        publicUrl: 'Public catalog URL',
        variant: 'Variant',
        hidden: 'Hidden',
        empty: 'No active products found.',
        moduleDisabled: 'Enable the Public catalog module in Settings → Modules to manage this page.'
      },
      settings: {
        loading: 'Loading settings...',
        noSettings: 'No settings available.',
        title: 'Tenant settings',
        subtitle: 'Manage enabled modules, feature flags, and UI preferences.',
        modules: 'Modules',
        features: 'Features',
        uiPreferences: 'UI preferences',
        inactive: 'inactive',
        compactNav: 'Compact navigation',
        showHelp: 'Show help tips',
        errorTitle: 'Unable to load tenant settings.',
        currencyTitle: 'Currency',
        internetCatalogTitle: 'Public catalog',
        internetCatalogEnabled: 'Enable public catalog page',
        internetCatalogPublicUrl: 'Public page URL',
        internetCatalogManageHint: 'Manage visibility and assortment on the Catalog visibility page in Admin.',
        currencyLabel: 'Default currency',
        currencyRub: 'Russian Ruble (RUB)',
        currencyUsd: 'US Dollar (USD)',
        currencyEur: 'Euro (EUR)',
        taxesTitle: 'Taxes',
        taxesSubtitle: 'Choose whether taxes are included in prices or added on top.',
        taxesEnabled: 'Enable tax calculation',
        taxesMode: 'Calculation mode',
        taxesModeExclusive: 'Add tax on top',
        taxesModeInclusive: 'Tax included in prices',
        taxesRounding: 'Rounding',
        taxesRoundingRound: 'Standard rounding',
        taxesRoundingCeil: 'Always round up',
        taxesRoundingFloor: 'Always round down',
        taxRuleName: 'Tax name',
        taxRuleRate: 'Rate (%)',
        taxRuleMethods: 'Payment methods',
        taxRuleStatus: 'Status',
        taxRuleActions: 'Actions',
        taxRuleEmpty: 'No tax rules yet.',
        taxRuleNamePlaceholder: 'Tax label',
        taxRuleRatePlaceholder: 'Rate',
        addTaxRule: 'Add tax rule',
        taxRuleActive: 'Active',
        taxRuleInactive: 'Inactive',
        taxRuleValidation: 'Enter a name and a valid rate.',
        taxRuleApplyValidation: 'Select at least one payment method.',
        taxRuleMethod: {
          cash: 'Cash',
          card: 'Card',
          transfer: 'Transfer'
        }
      },
      platformTenants: {
        title: 'Tenants',
        createTenant: 'Create organization',
        loading: 'Loading organizations...',
        codeLabel: 'Code',
        migrateTenant: 'Run migrations',
        migrating: 'Migrating...',
        tenantName: 'Organization name',
        tenantCode: 'Organization code',
        tenantCodeReadOnly: 'Organization code cannot be edited.',
        statusActive: 'active',
        statusInactive: 'inactive',
        statusProvisioning: 'provisioning',
        statusError: 'error',
        statusUnknown: 'unknown',
        schemaExists: 'Schema exists',
        lastError: 'Last error',
        domains: 'Domains',
        addDomain: 'Add domain',
        inviteLink: 'Invite link',
        generateInvite: 'Generate invite',
        expires: 'Expires',
        invites: 'Invitations',
        inviteEmail: 'Email',
        inviteCreated: 'Created',
        inviteExpires: 'Expires',
        inviteUsed: 'Used',
        regenerateInvite: 'Generate new invite',
        deleteInvite: 'Delete invite',
        deleteInviteConfirm: 'Delete this invite?',
        noInvites: 'No invites yet.',
        users: 'Users',
        deactivate: 'Deactivate',
        activate: 'Activate',
        deleteUserConfirm: 'Delete this user?',
        delete: 'Delete',
        userEmail: 'user email',
        rolesPlaceholder: 'roles (comma separated)',
        passwordMode: 'Password',
        inviteMode: 'Invite',
        passwordPlaceholder: 'password',
        createInvite: 'Create invite',
        addUser: 'Add user',
        domainPlaceholder: 'domain.example.com',
        inviteEmailPlaceholder: 'email@example.com',
        rolePlaceholder: 'role',
        statusArchived: 'archived',
        deleteOrganization: 'Archive / delete organization',
        deleteConfirm: 'Archive this organization? It will be hidden from customer access.',
        deleteDropSchemaConfirm: 'Also delete organization database schema? This action is irreversible.',
        archiveSuccess: 'Organization archived. Data kept.',
        deleteSuccess: 'Organization and schema deleted.',
        sectionGeneral: 'General',
        sectionTech: 'Technical status'
      },
      platformTenantCreate: {
        title: 'Create organization',
        tenantName: 'Organization name',
        tenantCode: 'Organization code',
        ownerEmail: 'Owner email',
        templateId: 'Template id (optional)',
        tenantUrl: 'Organization URL',
        inviteUrl: 'Invite URL'
      }
    }
  },
  ru: {
    translation: {
      language: {
        label: 'Язык',
        ru: 'Русский',
        en: 'Английский'
      },
      nav: {
        platform: 'Платформа',
        tenants: 'Организации',
        tenantConsole: 'Консоль организации',
        admin: 'Админ',
        pos: 'Касса',
        finance: 'Финансы',
        shifts: 'Смены',
        settings: 'Настройки',
        logout: 'Выйти'
      },
      adminNav: {
        catalog: 'Каталог',
        purchasing: 'Поставщики и закупки',
        stock: 'Склад',
        reports: 'Отчеты',
        users: 'Пользователи',
        catalogVisibility: 'Видимость каталога'
      },
      adminTabs: {
        categories: 'Категории',
        brands: 'Бренды',
        lines: 'Линейки',
        products: 'Товары',
        suppliers: 'Поставщики',
        invoices: 'Накладные',
        stockLevels: 'Остатки',
        adjustments: 'Корректировки'
      },
      common: {
        add: 'Добавить',
        save: 'Сохранить',
        close: 'Закрыть',
        saving: 'Сохранение...',
        cancel: 'Отмена',
        create: 'Создать',
        loading: 'Загрузка...',
        retry: 'Повторить',
        yes: 'Да',
        no: 'Нет',
        status: 'Статус',
        schema: 'Схема',
        revision: 'Ревизия',
        head: 'Head',
        primary: 'Основной',
        remove: 'Удалить',
        copy: 'Копировать',
        copied: 'Скопировано',
        email: 'Email',
        password: 'Пароль',
        created: 'Создано',
        updated: 'Обновлено',
        deleted: 'Удалено',
        delete: 'Удалить',
        confirmDelete: 'Удалить этот элемент?',
        saved: 'Сохранено',
        error: 'Что-то пошло не так'
      },
      errors: {
        loginFailed: 'Не удалось войти',
        requestTimeout: 'Время запроса истекло. Попробуйте снова.',
        requestCancelled: 'Запрос был отменен. Попробуйте снова.',
        invalidPlatformCredentials: 'Неверные платформенные учетные данные.',
        inviteInvalid: 'Приглашение недействительно или просрочено.',
        inviteNotFound: 'Приглашение не найдено. Попросите администратора создать новое.',
        inviteNotFoundOrExpired: 'Приглашение не найдено или устарело.',
        inviteExpired: 'Истек срок. Создайте новое приглашение.',
        inviteExpiredStatus: 'Приглашение просрочено.',
        inviteTenantMismatch: 'Ссылка от другой организации. Откройте домен из письма.',
        inviteServerError: 'Ошибка сервера, обратитесь к администратору.',
        inviteNetwork: 'Не удалось связаться с сервером.',
        requestId: 'ID запроса: {{id}}',
        inviteTokenRequired: 'Требуется токен приглашения.',
        inviteTokenMissing: 'В ссылке приглашения нет токена.',
        passwordLength: 'Пароль должен быть не короче 8 символов.',
        passwordMismatch: 'Пароли не совпадают.',
        registrationFailed: 'Не удалось завершить регистрацию.',
        loadTenantsFailed: 'Не удалось загрузить список организаций.',
        loadTenantSettingsFailed: 'Не удалось загрузить настройки организации.',
        loadTenantSettingsMessage: 'Не удалось загрузить настройки организации.',
        finalizeSaleFailed: 'Не удалось завершить продажу.',
        createTenantFailed: 'Не удалось создать организацию.',
        addItemsBeforeFinalize: 'Добавьте товары в корзину перед завершением.'
      },
      login: {
        title: 'Вход',
        signIn: 'Войти',
        emailPlaceholder: 'Email',
        passwordPlaceholder: 'Пароль'
      },
      register: {
        title: 'Завершение регистрации',
        invitedEmail: 'Приглашенный email',
        inviteTokenPlaceholder: 'Токен приглашения',
        passwordPlaceholder: 'Пароль',
        confirmPasswordPlaceholder: 'Подтвердите пароль',
        setPassword: 'Установить пароль'
      },
      platformLogin: {
        title: 'Доступ к платформе',
        subtitle: 'Войдите с учетными данными владельца платформы.',
        signIn: 'Войти'
      },
      admin: {
        title: 'Админ',
        menuToggle: 'Открыть меню админки',
        menuClose: 'Закрыть меню админки',
        catalog: 'Каталог',
        catalogSubtitle: 'Пошаговое создание каталога',
        catalogCategoryTitle: 'Категория',
        catalogBrandTitle: 'Бренд',
        catalogLinkTitle: 'Привязка бренда к категории',
        catalogLineTitle: 'Линейка',
        catalogProductTitle: 'Товар',
        categoryPlaceholder: 'Категория',
        addCategory: 'Добавить категорию',
        brandPlaceholder: 'Бренд',
        addBrand: 'Добавить бренд',
        linePlaceholder: 'Линейка',
        addLine: 'Добавить линейку',
        brandSelect: 'Бренд',
        categorySelect: 'Категория',
        lineSelect: 'Линейка',
        skuPlaceholder: 'SKU',
        barcodePlaceholder: 'Штрихкод',
        productPlaceholder: '(необязательно) товар — иначе из линейки',
        productImageLabel: 'Ссылка на фото',
        productImagePlaceholder: 'https://example.com/photo.jpg',
        productImageUpload: 'Загрузить фото',
        productImagePreview: 'Предпросмотр фото',
        clearImage: 'Очистить фото',
        unitLabel: 'Ед. измерения',
        purchasePriceLabel: 'Закупочная цена',
        purchasePricePlaceholder: 'Закупка',
        costPriceLabel: 'Себестоимость',
        costPricePlaceholder: 'Себестоимость',
        sellPriceLabel: 'Розничная цена',
        sellPricePlaceholder: 'Продажа',
        addProduct: 'Добавить товар',
        saveProduct: 'Сохранить товар',
        linkBrand: 'Привязать бренд',
        unlinkBrand: 'Отвязать',
        linkBrandModalTitle: 'Привязка бренда к категории',
        searchBrandPlaceholder: 'Поиск бренда',
        listRows: 'Рядов в окне',
        emptyCategories: 'Категории отсутствуют.',
        emptyBrands: 'Бренды отсутствуют.',
        emptyLines: 'Линейки отсутствуют.',
        emptyCategoryBrands: 'Нет привязанных брендов.',
        emptyLinkedBrands: 'Нет привязанных брендов.',
        emptyAvailableBrands: 'Нет доступных брендов.',
        emptyProducts: 'Товары отсутствуют.',
        selectCategoryToLink: 'Выберите категорию для просмотра связей.',
        unitPcs: 'шт.',
        unitMl: 'мл',
        unitG: 'г',
        table: {
          image: 'Фото',
          name: 'Название',
          brand: 'Бренд',
          brands: 'Бренды',
          actions: 'Действия',
          sku: 'SKU',
          category: 'Категория',
          line: 'Линейка',
          unit: 'Ед.',
          purchasePrice: 'Закупка',
          costPrice: 'Себестоимость',
          sellPrice: 'Продажа'
        },
        validation: {
          requiredFields: 'Заполните обязательные поля.',
          selectBrandForLine: 'Выберите бренд для создания линейки.',
          nonNegative: 'Значения должны быть не меньше 0.',
          productNameOrLine: 'Введите название товара или выберите линейку.'
        },
        errors: {
          alreadyExists: 'Уже существует.'
        },
        suppliersPurchasing: 'Поставщики и закупки',
        supplierPlaceholder: 'Поставщик',
        addSupplier: 'Добавить поставщика',
        newInvoice: 'Новая накладная',
        workingInvoice: 'Текущая накладная {{id}}',
        productSelect: 'Товар',
        qtyPlaceholder: 'Кол-во',
        costPlaceholder: 'Себестоимость',
        addItem: 'Добавить позицию',
        postInvoice: 'Провести накладную',
        stock: 'Склад',
        adjust: 'Корректировать',
        stockLevels: 'Остатки',
        reports: 'Отчеты',
        loadSummary: 'Загрузить сводку',
        totalSales: 'Продажи',
        totalPurchases: 'Закупки',
        grossMargin: 'Валовая маржа'
      },
      adminUsers: {
        subtitle: 'Управляйте доступом, ролями и сбросом пароля.',
        roles: 'Роли',
        active: 'Активен',
        empty: 'Пользователей пока нет.',
        noRoles: 'Без ролей',
        assignCashier: 'Назначить кассира',
        removeCashier: 'Снять кассира',
        newPasswordPlaceholder: 'Новый пароль',
        setPassword: 'Задать пароль',
        passwordRequired: 'Введите новый пароль.',
        rolesUpdated: 'Роли обновлены.',
        passwordUpdated: 'Пароль обновлен.'
      },
      adminSections: {
        createCategory: 'Создать категорию',
        createCategorySubtitle: 'Добавьте новую категорию для каталога.',
        categoryList: 'Список категорий',
        createBrand: 'Создать бренд',
        createBrandSubtitle: 'Бренды помогают группировать линейки и товары.',
        brandList: 'Список брендов',
        createLine: 'Создать линейку',
        createLineSubtitle: 'Привяжите линейку к выбранному бренду.',
        lineList: 'Список линеек',
        createProduct: 'Создать товар',
        createProductSubtitle: 'Заполните ключевые параметры и цены.',
        productList: 'Список товаров'
      },
      adminPurchasing: {
        subtitle: 'Работа с поставщиками и накладными.',
        createSupplier: 'Создать поставщика',
        createSupplierSubtitle: 'Добавьте поставщиков для закупок.',
        suppliersList: 'Список поставщиков',
        emptySuppliers: 'Поставщики отсутствуют.',
        selectSupplier: 'Выберите поставщика',
        workingInvoice: 'Рабочая накладная',
        workingInvoiceSubtitle: 'Создайте или выберите накладную и работайте с позициями.',
        selectInvoice: 'Выберите накладную',
        selectInvoicePlaceholder: 'Выберите накладную',
        unknownSupplier: 'Неизвестный поставщик',
        addItemTitle: 'Добавить позицию',
        addItemSubtitle: 'Добавьте товар, количество и себестоимость.',
        invoiceItems: 'Позиции накладной',
        invoiceItemsSubtitle: 'Список позиций выбранной накладной.',
        emptyInvoiceItems: 'Позиции отсутствуют.',
        qty: 'Кол-во',
        cost: 'Себестоимость',
        total: 'Итого',
        statusFilter: 'Статус накладной',
        statusAll: 'Все статусы',
        statusDraft: 'Черновик',
        statusPosted: 'Проведена',
        statusVoid: 'Аннулирована',
        searchField: 'Поиск накладной',
        searchPlaceholder: 'Номер накладной или поставщик',
        itemsCount: 'Количество позиций',
        voidInvoice: 'Аннулировать накладную',
        supplierNamePlaceholder: 'Название поставщика',
        supplierSelectPlaceholder: 'Выберите поставщика для накладной',
        productSelectPlaceholder: 'Выберите товар для позиции',
        qtyPlaceholderDetailed: 'Количество для позиции',
        costPlaceholderDetailed: 'Себестоимость за единицу'
      },
      adminStock: {
        subtitle: 'Контроль остатков и корректировки.',
        levelsTitle: 'Остатки',
        emptyLevels: 'Данные об остатках отсутствуют.',
        onHand: 'В наличии',
        adjustmentsTitle: 'Корректировка остатков',
        adjustmentsSubtitle: 'Используйте понятные сценарии корректировки и историю изменений.',
        productField: 'Товар',
        productPlaceholder: 'Выберите товар для корректировки',
        modeField: 'Режим корректировки',
        modeSet: 'Установить точный остаток',
        modeIncrease: 'Увеличить на количество',
        modeDecrease: 'Уменьшить на количество',
        qtyField: 'Количество',
        qtyPlaceholderDetailed: 'Введите количество для выбранного режима',
        reasonField: 'Причина',
        reasonPlaceholder: 'Укажите причину корректировки',
        currentAndNext: 'Текущий и итоговый остаток',
        previewText: 'Сейчас: {{current}}, после корректировки: {{next}}',
        defaultReason: 'ручная корректировка',
        delta: 'Изменение',
        reason: 'Причина',
        emptyAdjustments: 'Корректировки отсутствуют.',
        decreaseLimitError: 'Нельзя уменьшить больше текущего остатка.'
      },
      adminReports: {
        subtitle: 'Ключевые метрики и эффективность продаж.',
        period: 'Период',
        customRange: 'Произвольный диапазон',
        from: 'С',
        to: 'По',
        load: 'Загрузить отчет',
        revenue: 'Выручка',
        purchases: 'Закупки',
        margin: 'Маржа',
        salesCount: 'Кол-во продаж',
        topProducts: 'Топ товаров',
        topProductsSubtitle: 'Самые продаваемые позиции.',
        sales: 'Продажи',
        noData: 'Данные отсутствуют.'
      },
      pos: {
        title: 'Касса',
        subtitle: 'Быстрые продажи, гибкие оплаты и налоги в расчетах.',
        searchProducts: 'Поиск товаров',
        noImage: 'Нет фото',
        cart: 'Корзина',
        emptyCart: 'Корзина пуста',
        subtotal: 'Подытог',
        tax: 'Налог',
        taxIncluded: 'Налог (включен)',
        taxAdded: 'Налог (сверху)',
        payments: 'Оплаты',
        amount: 'Сумма',
        reference: 'Комментарий',
        addPayment: 'Добавить',
        due: 'К оплате',
        sendToTerminal: 'Отправлять в терминал',
        finalize: 'Завершить продажу',
        sale: 'Продажа',
        status: 'Статус',
        total: 'Итого',
        product: 'Товар',
        qty: 'Кол-во',
        price: 'Цена',
        taxes: 'Налоги',
        loadMore: 'Показать еще',
        saleDetails: 'Детали продажи',
        remove: 'Удалить',
        paymentMethodCash: 'Наличные',
        paymentMethodCard: 'Карта',
        paymentMethodTransfer: 'Перевод',
        historyTitle: 'История продаж',
        historySubtitle: 'Посмотрите недавние продажи и фильтры по кассиру, датам и оплате.',
        historyCashier: 'Кассир',
        historyAllCashiers: 'Все кассиры',
        historyDateFrom: 'С',
        historyDateTo: 'По',
        historyPaymentMethod: 'Способ оплаты',
        historyAllPayments: 'Все способы',
        historyApply: 'Применить фильтры',
        historyReset: 'Сбросить',
        historyEmpty: 'Продажи по выбранным фильтрам не найдены.',
        statusDraft: 'Черновик',
        statusCompleted: 'Завершена',
        statusCancelled: 'Отменена',
        shiftStatus: 'Статус смены',
        shiftOpen: 'Открыта',
        shiftClosed: 'Закрыта',
        openShift: 'Открыть смену',
        closeShift: 'Закрыть смену',
        shiftRequired: 'Откройте смену перед завершением продажи.',
        shiftStoreUnavailable: 'Нет доступного магазина для открытия смены.'
      },
      shifts: {
        title: 'Смены',
        subtitle: 'Контроль смен кассиров, статусов и оплат.',
        filtersTitle: 'Фильтры',
        filterDateFrom: 'С',
        filterDateTo: 'По',
        filterCashier: 'Кассир',
        filterAllCashiers: 'Все кассиры',
        filterStore: 'Магазин',
        filterAllStores: 'Все магазины',
        filterStatus: 'Статус',
        filterAllStatuses: 'Все статусы',
        applyFilters: 'Применить фильтры',
        resetFilters: 'Сбросить',
        tableTitle: 'Список смен',
        colOpenedAt: 'Открыта',
        colClosedAt: 'Закрыта',
        colCashier: 'Кассир',
        colStore: 'Магазин',
        colRevenue: 'Выручка',
        colPayments: 'Нал / Карта / Перевод',
        colStatus: 'Статус',
        colAction: 'Действие',
        details: 'Детали',
        detailTitle: 'Детали смены',
        statusOpen: 'Открыта',
        statusClosed: 'Закрыта',
        closeShift: 'Закрыть смену',
        empty: 'Смены не найдены.'
      },
      finance: {
        title: 'Финансы',
        filtersTitle: 'Фильтры',
        filtersSubtitle: 'Выберите даты и способы оплаты для отчетов ниже.',
        applyFilters: 'Применить',
        resetFilters: 'Сбросить фильтры',
        dateFrom: 'С',
        dateTo: 'По',
        expenseCategories: 'Категории расходов',
        categoryName: 'Название категории',
        addCategory: 'Добавить категорию',
        logExpense: 'Записать расход',
        amount: 'Сумма',
        category: 'Категория',
        paymentMethod: 'Способ оплаты',
        note: 'Комментарий',
        saveExpense: 'Сохранить расход',
        pnlSummary: 'Отчет о прибылях и убытках',
        overviewTitle: 'Обзор продаж',
        overviewSubtitle: 'Выручка, валовая прибыль и налоги за выбранный период.',
        today: 'Сегодня',
        week: 'Неделя',
        month: 'Месяц',
        totalSales: 'Продажи',
        totalRevenue: 'Выручка',
        cogs: 'Себестоимость',
        grossProfit: 'Валовая прибыль',
        expenses: 'Расходы',
        netProfit: 'Чистая прибыль',
        totalTaxes: 'Налоги',
        paymentMethodTitle: 'Способ оплаты',
        topProductsTitle: 'Топ товаров',
        topProductsSubtitle: 'Лидеры по выручке и марже.',
        productName: 'Товар',
        quantity: 'Количество',
        totalMargin: 'Маржа',
        noTopProducts: 'Нет данных по товарам.',
        inventoryTitle: 'Оценка остатков',
        inventorySubtitle: 'Оценка складских остатков по себестоимости.',
        inventoryTotal: 'Итого по складу:',
        unitCost: 'Себестоимость',
        inventoryValue: 'Стоимость',
        inventoryEmpty: 'Данные по складу отсутствуют.',
        expensesTitle: 'Расходы',
        noNote: 'Без комментария',
        taxesTitle: 'Налоги',
        taxesSubtitle: 'Сводка налогов к уплате за выбранный период.',
        taxesEmpty: 'Налоги не настроены.',
        taxName: 'Налог',
        taxRate: 'Ставка',
        taxTotal: 'К уплате',
        taxCash: 'Наличные',
        taxCard: 'Карта',
        taxTransfer: 'Перевод',
        taxGrandTotal: 'Итого по налогам',
        recurringExpensesTitle: 'Постоянные расходы',
        recurringExpensesEmpty: 'Постоянные расходы пока не добавлены.',
        addRecurringExpense: 'Добавить расход',
        recurringNamePrompt: 'Название постоянного расхода',
        recurringAmountPrompt: 'Сумма постоянного расхода',
        recurringDeactivateConfirm: 'Деактивировать этот постоянный расход?',
        invalidAmount: 'Введите корректную сумму.',
        name: 'Название',
        period: 'Период',
        actions: 'Действия',
        active: 'Активен',
        inactive: 'Неактивен',
        edit: 'Редактировать',
        deactivate: 'Деактивировать',
        date: 'Дата',
        operatingProfit: 'Операционная прибыль',
        profitabilityStatus: 'Рентабельность',
        profitable: 'Прибыльно',
        unprofitable: 'Убыточно',
        profitLossTitle: 'Прибыль/убыток',
        profitLossSubtitle: 'Валовая и операционная прибыль с дневной детализацией.',
        profitLossEmpty: 'Нет данных по прибыли/убытку за выбранный период.',
        recurringPeriod: {
          daily: 'Ежедневно',
          weekly: 'Еженедельно',
          monthly: 'Ежемесячно'
        },
        taxMethod: {
          cash: 'Наличные',
          card: 'Карта',
          transfer: 'Перевод'
        }
      },
      adminCatalogVisibility: {
        subtitle: 'Управляйте товарами, которые показываются на публичной странице каталога.',
        publicUrl: 'Адрес публичного каталога',
        variant: 'Вариант',
        hidden: 'Скрыт',
        empty: 'Активные товары не найдены.',
        moduleDisabled: 'Включите модуль «Публичный каталог» в Настройки → Модули, чтобы управлять этой страницей.'
      },
      settings: {
        loading: 'Загрузка настроек...',
        noSettings: 'Настройки недоступны.',
        title: 'Настройки организации',
        subtitle: 'Управляйте модулями, фичами и настройками интерфейса.',
        modules: 'Модули',
        features: 'Функции',
        uiPreferences: 'Предпочтения интерфейса',
        inactive: 'неактивен',
        compactNav: 'Компактная навигация',
        showHelp: 'Показывать подсказки',
        errorTitle: 'Не удалось загрузить настройки организации.',
        currencyTitle: 'Валюта',
        internetCatalogTitle: 'Публичный каталог',
        internetCatalogEnabled: 'Включить публичную страницу каталога',
        internetCatalogPublicUrl: 'Адрес публичной страницы',
        internetCatalogManageHint: 'Управляйте видимостью и ассортиментом на странице «Видимость каталога» в админке.',
        currencyLabel: 'Валюта по умолчанию',
        currencyRub: 'Российский рубль (RUB)',
        currencyUsd: 'Доллар США (USD)',
        currencyEur: 'Евро (EUR)',
        taxesTitle: 'Налоги',
        taxesSubtitle: 'Выберите, включен ли налог в цену или начисляется сверху.',
        taxesEnabled: 'Включить расчет налогов',
        taxesMode: 'Режим расчета',
        taxesModeExclusive: 'Начислять сверху',
        taxesModeInclusive: 'Включено в цену',
        taxesRounding: 'Округление',
        taxesRoundingRound: 'Стандартное округление',
        taxesRoundingCeil: 'Всегда вверх',
        taxesRoundingFloor: 'Всегда вниз',
        taxRuleName: 'Название',
        taxRuleRate: 'Ставка (%)',
        taxRuleMethods: 'Типы оплат',
        taxRuleStatus: 'Статус',
        taxRuleActions: 'Действия',
        taxRuleEmpty: 'Правила налогов отсутствуют.',
        taxRuleNamePlaceholder: 'Название налога',
        taxRuleRatePlaceholder: 'Ставка',
        addTaxRule: 'Добавить налог',
        taxRuleActive: 'Активен',
        taxRuleInactive: 'Неактивен',
        taxRuleValidation: 'Введите название и корректную ставку.',
        taxRuleApplyValidation: 'Выберите хотя бы один тип оплаты.',
        taxRuleMethod: {
          cash: 'Наличные',
          card: 'Карта',
          transfer: 'Перевод'
        }
      },
      platformTenants: {
        title: 'Организации',
        createTenant: 'Создать организацию',
        loading: 'Загрузка организаций...',
        codeLabel: 'Код',
        migrateTenant: 'Запустить миграции',
        migrating: 'Миграция...',
        tenantName: 'Название организации',
        tenantCode: 'Код организации',
        tenantCodeReadOnly: 'Код организации нельзя редактировать.',
        statusActive: 'активен',
        statusInactive: 'неактивен',
        statusProvisioning: 'в обработке',
        statusError: 'ошибка',
        statusUnknown: 'неизвестно',
        schemaExists: 'Схема существует',
        lastError: 'Последняя ошибка',
        domains: 'Домены',
        addDomain: 'Добавить домен',
        inviteLink: 'Ссылка приглашения',
        generateInvite: 'Создать приглашение',
        expires: 'Истекает',
        invites: 'Приглашения',
        inviteEmail: 'Email',
        inviteCreated: 'Создано',
        inviteExpires: 'Истекает',
        inviteUsed: 'Использовано',
        regenerateInvite: 'Сгенерировать новое приглашение',
        deleteInvite: 'Удалить приглашение',
        deleteInviteConfirm: 'Удалить это приглашение?',
        noInvites: 'Приглашений пока нет.',
        users: 'Пользователи',
        deactivate: 'Деактивировать',
        activate: 'Активировать',
        deleteUserConfirm: 'Удалить этого пользователя?',
        delete: 'Удалить',
        userEmail: 'email пользователя',
        rolesPlaceholder: 'роли (через запятую)',
        passwordMode: 'Пароль',
        inviteMode: 'Приглашение',
        passwordPlaceholder: 'пароль',
        createInvite: 'Создать приглашение',
        addUser: 'Добавить пользователя',
        domainPlaceholder: 'domain.example.com',
        inviteEmailPlaceholder: 'email@example.com',
        rolePlaceholder: 'роль',
        statusArchived: 'в архиве',
        deleteOrganization: 'Архивировать / удалить организацию',
        deleteConfirm: 'Архивировать организацию? Она станет недоступна клиентам.',
        deleteDropSchemaConfirm: 'Удалить также базу данных (схему) организации? Действие необратимо.',
        archiveSuccess: 'Организация архивирована. Данные сохранены.',
        deleteSuccess: 'Организация и схема БД удалены.',
        sectionGeneral: 'Основное',
        sectionTech: 'Технический статус'
      },
      platformTenantCreate: {
        title: 'Создание организации',
        tenantName: 'Название организации',
        tenantCode: 'Код организации',
        ownerEmail: 'Email владельца',
        templateId: 'ID шаблона (опционально)',
        tenantUrl: 'URL организации',
        inviteUrl: 'URL приглашения'
      }
    }
  }
}

i18n.use(initReactI18next).init({
  resources,
  lng: detectInitialLanguage(),
  fallbackLng: 'ru',
  interpolation: {
    escapeValue: false
  }
})

i18n.on('languageChanged', (language) => {
  localStorage.setItem(storageKey, language)
})

export default i18n
